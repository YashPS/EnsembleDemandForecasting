apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: run1-
  annotations: {pipelines.kubeflow.org/kfp_sdk_version: 1.7.1, pipelines.kubeflow.org/pipeline_compilation_time: '2022-06-27T11:39:25.869765',
                pipelines.kubeflow.org/pipeline_spec: '{"description": "Testing parallel training",
      "inputs": [{"default": "http://rok.rok.svc.cluster.local/swift/v1/kubeflow-user/notebooks/ensemble-0_ensemble-workspace-4x5l7?version=4418e7ef-489a-4835-8426-50934ced4e83",
      "name": "rok_ensemble_workspace_4x5l7_url", "optional": true, "type": "str"}],
      "name": "run1"}'}
  labels: {pipelines.kubeflow.org/kfp_sdk_version: 1.7.1}
spec:
  entrypoint: run1
  templates:
    - name: compare-models
      container:
        args: [--in, xgb_mse, '{{inputs.parameters.evaluate-xgb-xgb_mse}}', --in, OBJECTS_DIR,
               '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in, lstm_mse, '{{inputs.parameters.evaluate-lstm-lstm_mse}}',
               --in, cnf, '{{inputs.parameters.get-trained-lstm-model-cnf}}', --in, SCALER_FILE,
               '{{inputs.parameters.define-constants-SCALER_FILE}}', --in, xgb_smape, '{{inputs.parameters.evaluate-xgb-xgb_smape}}',
               --in, lstm_smape, '{{inputs.parameters.evaluate-lstm-lstm_smape}}']
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, compare_models]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: evaluate-lstm-lstm_mse}
          - {name: evaluate-lstm-lstm_smape}
          - {name: evaluate-xgb-xgb_mse}
          - {name: evaluate-xgb-xgb_smape}
          - {name: get-trained-lstm-model-cnf}
      outputs:
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: compare_models, path: /tmp/compare_models.html}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "evaluate-lstm",
          "evaluate-xgb"]', pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "xgb_mse", {"inputValue": "xgb_mse"}, "--in",
          "OBJECTS_DIR", {"inputValue": "OBJECTS_DIR"}, "--in", "lstm_mse", {"inputValue":
          "lstm_mse"}, "--in", "cnf", {"inputValue": "cnf"}, "--in", "SCALER_FILE",
          {"inputValue": "SCALER_FILE"}, "--in", "xgb_smape", {"inputValue": "xgb_smape"},
          "--in", "lstm_smape", {"inputValue": "lstm_smape"}], "command": ["python3",
          "-u", "-m", "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "compare_models"], "env": {"PYTHONUNBUFFERED": "1"}, "image":
          "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "xgb_mse", "type": "str"}, {"name": "OBJECTS_DIR", "type":
          "str"}, {"name": "lstm_mse", "type": "str"}, {"name": "cnf", "type": "str"},
          {"name": "SCALER_FILE", "type": "str"}, {"name": "xgb_smape", "type": "str"},
          {"name": "lstm_smape", "type": "str"}], "name": "compare_models", "outputs":
          []}', pipelines.kubeflow.org/component_ref: '{"name": "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "cnf": "{{inputs.parameters.get-trained-lstm-model-cnf}}", "lstm_mse": "{{inputs.parameters.evaluate-lstm-lstm_mse}}",
          "lstm_smape": "{{inputs.parameters.evaluate-lstm-lstm_smape}}", "xgb_mse":
          "{{inputs.parameters.evaluate-xgb-xgb_mse}}", "xgb_smape": "{{inputs.parameters.evaluate-xgb-xgb_smape}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: create-volume-1
      resource:
        action: create
        setOwnerReference: true
        manifest: |
          apiVersion: v1
          kind: PersistentVolumeClaim
          metadata:
            annotations:
              rok/origin: '{{inputs.parameters.rok_ensemble_workspace_4x5l7_url}}'
            name: '{{workflow.name}}-ensemble-workspace-4x5l7'
          spec:
            accessModes:
            - ReadWriteMany
            resources:
              requests:
                storage: 5Gi
            storageClassName: rok
      inputs:
        parameters:
          - {name: rok_ensemble_workspace_4x5l7_url}
      outputs:
        parameters:
          - name: create-volume-1-manifest
            valueFrom: {jsonPath: '{}'}
          - name: create-volume-1-name
            valueFrom: {jsonPath: '{.metadata.name}'}
          - name: create-volume-1-size
            valueFrom: {jsonPath: '{.status.capacity.storage}'}
      metadata:
        annotations: {pipelines.kubeflow.org/max_cache_staleness: P0D}
        labels:
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
    - name: define-constants
      container:
        args: [--out, TEST_PATH, /tmp/outputs/TEST_PATH/data, --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data,
               --out, cnf, /tmp/outputs/cnf/data, --out, TRAIN_PATH, /tmp/outputs/TRAIN_PATH/data,
               --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, MODEL_DIR, /tmp/outputs/MODEL_DIR/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, define_constants]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
      outputs:
        parameters:
          - name: define-constants-MODEL_DIR
            valueFrom: {path: /tmp/outputs/MODEL_DIR/data}
          - name: define-constants-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: define-constants-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: define-constants-TEST_PATH
            valueFrom: {path: /tmp/outputs/TEST_PATH/data}
          - name: define-constants-TRAIN_PATH
            valueFrom: {path: /tmp/outputs/TRAIN_PATH/data}
          - name: define-constants-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: define_constants, path: /tmp/define_constants.html}
          - {name: define-constants-MODEL_DIR, path: /tmp/outputs/MODEL_DIR/data}
          - {name: define-constants-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: define-constants-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: define-constants-TEST_PATH, path: /tmp/outputs/TEST_PATH/data}
          - {name: define-constants-TRAIN_PATH, path: /tmp/outputs/TRAIN_PATH/data}
          - {name: define-constants-cnf, path: /tmp/outputs/cnf/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--out", "TEST_PATH", {"outputPath": "TEST_PATH"},
          "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"}, "--out", "cnf", {"outputPath":
          "cnf"}, "--out", "TRAIN_PATH", {"outputPath": "TRAIN_PATH"}, "--out", "SCALER_FILE",
          {"outputPath": "SCALER_FILE"}, "--out", "MODEL_DIR", {"outputPath": "MODEL_DIR"}],
          "command": ["python3", "-u", "-m", "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "define_constants"], "env": {"PYTHONUNBUFFERED": "1"}, "image":
          "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [], "name": "define_constants", "outputs": [{"name": "TEST_PATH",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}, {"name": "TRAIN_PATH", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}, {"name": "MODEL_DIR", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: evaluate-lstm
      container:
        args: [--in, X_valid_series, '{{inputs.parameters.get-trained-lstm-model-X_valid_series}}',
               --in, Y_valid, '{{inputs.parameters.get-trained-lstm-model-Y_valid}}', --in,
               OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in, cnf,
               '{{inputs.parameters.get-trained-lstm-model-cnf}}', --in, model_lstm, '{{inputs.parameters.get-trained-lstm-model-model_lstm}}',
               --in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}', --out,
               lstm_mse, /tmp/outputs/lstm_mse/data, --out, lstm_smape, /tmp/outputs/lstm_smape/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, evaluate_lstm]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: get-trained-lstm-model-X_valid_series}
          - {name: get-trained-lstm-model-Y_valid}
          - {name: get-trained-lstm-model-cnf}
          - {name: get-trained-lstm-model-model_lstm}
      outputs:
        parameters:
          - name: evaluate-lstm-lstm_mse
            valueFrom: {path: /tmp/outputs/lstm_mse/data}
          - name: evaluate-lstm-lstm_smape
            valueFrom: {path: /tmp/outputs/lstm_smape/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: evaluate_lstm, path: /tmp/evaluate_lstm.html}
          - {name: evaluate-lstm-lstm_mse, path: /tmp/outputs/lstm_mse/data}
          - {name: evaluate-lstm-lstm_smape, path: /tmp/outputs/lstm_smape/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "get-trained-lstm-model"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "X_valid_series", {"inputValue": "X_valid_series"},
          "--in", "Y_valid", {"inputValue": "Y_valid"}, "--in", "OBJECTS_DIR", {"inputValue":
          "OBJECTS_DIR"}, "--in", "cnf", {"inputValue": "cnf"}, "--in", "model_lstm",
          {"inputValue": "model_lstm"}, "--in", "SCALER_FILE", {"inputValue": "SCALER_FILE"},
          "--out", "lstm_mse", {"outputPath": "lstm_mse"}, "--out", "lstm_smape",
          {"outputPath": "lstm_smape"}], "command": ["python3", "-u", "-m", "kale",
          "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb", "--step",
          "evaluate_lstm"], "env": {"PYTHONUNBUFFERED": "1"}, "image": "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "X_valid_series", "type": "str"}, {"name": "Y_valid",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}, {"name": "model_lstm", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}], "name": "evaluate_lstm", "outputs": [{"name": "lstm_mse",
          "type": "str"}, {"name": "lstm_smape", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "X_valid_series": "{{inputs.parameters.get-trained-lstm-model-X_valid_series}}",
          "Y_valid": "{{inputs.parameters.get-trained-lstm-model-Y_valid}}", "cnf":
          "{{inputs.parameters.get-trained-lstm-model-cnf}}", "model_lstm": "{{inputs.parameters.get-trained-lstm-model-model_lstm}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: evaluate-xgb
      container:
        args: [--in, xgb_model, '{{inputs.parameters.get-trained-xgb-model-xgb_model}}',
               --in, xgb_test_data, '{{inputs.parameters.get-trained-xgb-model-xgb_test_data}}',
               --in, OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in,
               cnf, '{{inputs.parameters.get-trained-xgb-model-cnf}}', --in, SCALER_FILE,
               '{{inputs.parameters.define-constants-SCALER_FILE}}', --in, xgb_test_y, '{{inputs.parameters.get-trained-xgb-model-xgb_test_y}}',
               --out, xgb_mse, /tmp/outputs/xgb_mse/data, --out, xgb_smape, /tmp/outputs/xgb_smape/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, evaluate_xgb]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: get-trained-xgb-model-cnf}
          - {name: get-trained-xgb-model-xgb_model}
          - {name: get-trained-xgb-model-xgb_test_data}
          - {name: get-trained-xgb-model-xgb_test_y}
      outputs:
        parameters:
          - name: evaluate-xgb-xgb_mse
            valueFrom: {path: /tmp/outputs/xgb_mse/data}
          - name: evaluate-xgb-xgb_smape
            valueFrom: {path: /tmp/outputs/xgb_smape/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: evaluate_xgb, path: /tmp/evaluate_xgb.html}
          - {name: evaluate-xgb-xgb_mse, path: /tmp/outputs/xgb_mse/data}
          - {name: evaluate-xgb-xgb_smape, path: /tmp/outputs/xgb_smape/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "get-trained-xgb-model"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "xgb_model", {"inputValue": "xgb_model"},
          "--in", "xgb_test_data", {"inputValue": "xgb_test_data"}, "--in", "OBJECTS_DIR",
          {"inputValue": "OBJECTS_DIR"}, "--in", "cnf", {"inputValue": "cnf"}, "--in",
          "SCALER_FILE", {"inputValue": "SCALER_FILE"}, "--in", "xgb_test_y", {"inputValue":
          "xgb_test_y"}, "--out", "xgb_mse", {"outputPath": "xgb_mse"}, "--out", "xgb_smape",
          {"outputPath": "xgb_smape"}], "command": ["python3", "-u", "-m", "kale",
          "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb", "--step",
          "evaluate_xgb"], "env": {"PYTHONUNBUFFERED": "1"}, "image": "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "xgb_model", "type": "str"}, {"name": "xgb_test_data",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}, {"name": "SCALER_FILE", "type": "str"}, {"name": "xgb_test_y",
          "type": "str"}], "name": "evaluate_xgb", "outputs": [{"name": "xgb_mse",
          "type": "str"}, {"name": "xgb_smape", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "cnf": "{{inputs.parameters.get-trained-xgb-model-cnf}}", "xgb_model": "{{inputs.parameters.get-trained-xgb-model-xgb_model}}",
          "xgb_test_data": "{{inputs.parameters.get-trained-xgb-model-xgb_test_data}}",
          "xgb_test_y": "{{inputs.parameters.get-trained-xgb-model-xgb_test_y}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: get-trained-lstm-model
      container:
        args: [--in, X_valid_series, '{{inputs.parameters.lstm-data-processing-X_valid_series}}',
               --in, X_train_series, '{{inputs.parameters.lstm-data-processing-X_train_series}}',
               --in, Y_valid, '{{inputs.parameters.lstm-data-processing-Y_valid}}', --in,
               OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in, cnf,
               '{{inputs.parameters.lstm-data-processing-cnf}}', --in, Y_train, '{{inputs.parameters.lstm-data-processing-Y_train}}',
               --in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}', --in,
               MODEL_DIR, '{{inputs.parameters.define-constants-MODEL_DIR}}', --out, X_valid_series,
               /tmp/outputs/X_valid_series/data, --out, model_lstm, /tmp/outputs/model_lstm/data,
               --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, Y_valid, /tmp/outputs/Y_valid/data,
               --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data, --out, cnf, /tmp/outputs/cnf/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, get_trained_lstm_model]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-MODEL_DIR}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: lstm-data-processing-X_train_series}
          - {name: lstm-data-processing-X_valid_series}
          - {name: lstm-data-processing-Y_train}
          - {name: lstm-data-processing-Y_valid}
          - {name: lstm-data-processing-cnf}
      outputs:
        parameters:
          - name: get-trained-lstm-model-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: get-trained-lstm-model-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: get-trained-lstm-model-X_valid_series
            valueFrom: {path: /tmp/outputs/X_valid_series/data}
          - name: get-trained-lstm-model-Y_valid
            valueFrom: {path: /tmp/outputs/Y_valid/data}
          - name: get-trained-lstm-model-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
          - name: get-trained-lstm-model-model_lstm
            valueFrom: {path: /tmp/outputs/model_lstm/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: get_trained_lstm_model, path: /tmp/get_trained_lstm_model.html}
          - {name: get-trained-lstm-model-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: get-trained-lstm-model-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: get-trained-lstm-model-X_valid_series, path: /tmp/outputs/X_valid_series/data}
          - {name: get-trained-lstm-model-Y_valid, path: /tmp/outputs/Y_valid/data}
          - {name: get-trained-lstm-model-cnf, path: /tmp/outputs/cnf/data}
          - {name: get-trained-lstm-model-model_lstm, path: /tmp/outputs/model_lstm/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "lstm-data-processing"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "X_valid_series", {"inputValue": "X_valid_series"},
          "--in", "X_train_series", {"inputValue": "X_train_series"}, "--in", "Y_valid",
          {"inputValue": "Y_valid"}, "--in", "OBJECTS_DIR", {"inputValue": "OBJECTS_DIR"},
          "--in", "cnf", {"inputValue": "cnf"}, "--in", "Y_train", {"inputValue":
          "Y_train"}, "--in", "SCALER_FILE", {"inputValue": "SCALER_FILE"}, "--in",
          "MODEL_DIR", {"inputValue": "MODEL_DIR"}, "--out", "X_valid_series", {"outputPath":
          "X_valid_series"}, "--out", "model_lstm", {"outputPath": "model_lstm"},
          "--out", "SCALER_FILE", {"outputPath": "SCALER_FILE"}, "--out", "Y_valid",
          {"outputPath": "Y_valid"}, "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"},
          "--out", "cnf", {"outputPath": "cnf"}], "command": ["python3", "-u", "-m",
          "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "get_trained_lstm_model"], "env": {"PYTHONUNBUFFERED": "1"}, "image":
          "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "X_valid_series", "type": "str"}, {"name": "X_train_series",
          "type": "str"}, {"name": "Y_valid", "type": "str"}, {"name": "OBJECTS_DIR",
          "type": "str"}, {"name": "cnf", "type": "str"}, {"name": "Y_train", "type":
          "str"}, {"name": "SCALER_FILE", "type": "str"}, {"name": "MODEL_DIR", "type":
          "str"}], "name": "get_trained_lstm_model", "outputs": [{"name": "X_valid_series",
          "type": "str"}, {"name": "model_lstm", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}, {"name": "Y_valid", "type": "str"}, {"name": "OBJECTS_DIR",
          "type": "str"}, {"name": "cnf", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"MODEL_DIR": "{{inputs.parameters.define-constants-MODEL_DIR}}",
          "OBJECTS_DIR": "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE":
          "{{inputs.parameters.define-constants-SCALER_FILE}}", "X_train_series":
          "{{inputs.parameters.lstm-data-processing-X_train_series}}", "X_valid_series":
          "{{inputs.parameters.lstm-data-processing-X_valid_series}}", "Y_train":
          "{{inputs.parameters.lstm-data-processing-Y_train}}", "Y_valid": "{{inputs.parameters.lstm-data-processing-Y_valid}}",
          "cnf": "{{inputs.parameters.lstm-data-processing-cnf}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: get-trained-xgb-model
      container:
        args: [--in, OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}',
               --in, xgb_train_y, '{{inputs.parameters.xgb-data-processing-xgb_train_y}}',
               --in, xgb_train_x, '{{inputs.parameters.xgb-data-processing-xgb_train_x}}',
               --in, cnf, '{{inputs.parameters.xgb-data-processing-cnf}}', --in, xgb_test_x,
               '{{inputs.parameters.xgb-data-processing-xgb_test_x}}', --in, SCALER_FILE,
               '{{inputs.parameters.define-constants-SCALER_FILE}}', --in, xgb_test_y, '{{inputs.parameters.xgb-data-processing-xgb_test_y}}',
               --in, MODEL_DIR, '{{inputs.parameters.define-constants-MODEL_DIR}}', --out,
               SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, xgb_model, /tmp/outputs/xgb_model/data,
               --out, xgb_test_data, /tmp/outputs/xgb_test_data/data, --out, xgb_test_y,
               /tmp/outputs/xgb_test_y/data, --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data,
               --out, cnf, /tmp/outputs/cnf/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, get_trained_xgb_model]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-MODEL_DIR}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: xgb-data-processing-cnf}
          - {name: xgb-data-processing-xgb_test_x}
          - {name: xgb-data-processing-xgb_test_y}
          - {name: xgb-data-processing-xgb_train_x}
          - {name: xgb-data-processing-xgb_train_y}
      outputs:
        parameters:
          - name: get-trained-xgb-model-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: get-trained-xgb-model-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: get-trained-xgb-model-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
          - name: get-trained-xgb-model-xgb_model
            valueFrom: {path: /tmp/outputs/xgb_model/data}
          - name: get-trained-xgb-model-xgb_test_data
            valueFrom: {path: /tmp/outputs/xgb_test_data/data}
          - name: get-trained-xgb-model-xgb_test_y
            valueFrom: {path: /tmp/outputs/xgb_test_y/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: get_trained_xgb_model, path: /tmp/get_trained_xgb_model.html}
          - {name: get-trained-xgb-model-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: get-trained-xgb-model-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: get-trained-xgb-model-cnf, path: /tmp/outputs/cnf/data}
          - {name: get-trained-xgb-model-xgb_model, path: /tmp/outputs/xgb_model/data}
          - {name: get-trained-xgb-model-xgb_test_data, path: /tmp/outputs/xgb_test_data/data}
          - {name: get-trained-xgb-model-xgb_test_y, path: /tmp/outputs/xgb_test_y/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "xgb-data-processing"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "OBJECTS_DIR", {"inputValue": "OBJECTS_DIR"},
          "--in", "xgb_train_y", {"inputValue": "xgb_train_y"}, "--in", "xgb_train_x",
          {"inputValue": "xgb_train_x"}, "--in", "cnf", {"inputValue": "cnf"}, "--in",
          "xgb_test_x", {"inputValue": "xgb_test_x"}, "--in", "SCALER_FILE", {"inputValue":
          "SCALER_FILE"}, "--in", "xgb_test_y", {"inputValue": "xgb_test_y"}, "--in",
          "MODEL_DIR", {"inputValue": "MODEL_DIR"}, "--out", "SCALER_FILE", {"outputPath":
          "SCALER_FILE"}, "--out", "xgb_model", {"outputPath": "xgb_model"}, "--out",
          "xgb_test_data", {"outputPath": "xgb_test_data"}, "--out", "xgb_test_y",
          {"outputPath": "xgb_test_y"}, "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"},
          "--out", "cnf", {"outputPath": "cnf"}], "command": ["python3", "-u", "-m",
          "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "get_trained_xgb_model"], "env": {"PYTHONUNBUFFERED": "1"}, "image":
          "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "OBJECTS_DIR", "type": "str"}, {"name": "xgb_train_y",
          "type": "str"}, {"name": "xgb_train_x", "type": "str"}, {"name": "cnf",
          "type": "str"}, {"name": "xgb_test_x", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}, {"name": "xgb_test_y", "type": "str"}, {"name": "MODEL_DIR",
          "type": "str"}], "name": "get_trained_xgb_model", "outputs": [{"name": "SCALER_FILE",
          "type": "str"}, {"name": "xgb_model", "type": "str"}, {"name": "xgb_test_data",
          "type": "str"}, {"name": "xgb_test_y", "type": "str"}, {"name": "OBJECTS_DIR",
          "type": "str"}, {"name": "cnf", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"MODEL_DIR": "{{inputs.parameters.define-constants-MODEL_DIR}}",
          "OBJECTS_DIR": "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE":
          "{{inputs.parameters.define-constants-SCALER_FILE}}", "cnf": "{{inputs.parameters.xgb-data-processing-cnf}}",
          "xgb_test_x": "{{inputs.parameters.xgb-data-processing-xgb_test_x}}", "xgb_test_y":
          "{{inputs.parameters.xgb-data-processing-xgb_test_y}}", "xgb_train_x": "{{inputs.parameters.xgb-data-processing-xgb_train_x}}",
          "xgb_train_y": "{{inputs.parameters.xgb-data-processing-xgb_train_y}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: lstm-data-processing
      container:
        args: [--in, preprocessed_data, '{{inputs.parameters.process-data-preprocessed_data}}',
               --in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}', --in,
               OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in, cnf,
               '{{inputs.parameters.process-data-cnf}}', --out, X_valid_series, /tmp/outputs/X_valid_series/data,
               --out, X_train_series, /tmp/outputs/X_train_series/data, --out, Y_valid, /tmp/outputs/Y_valid/data,
               --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data, --out, cnf, /tmp/outputs/cnf/data,
               --out, Y_train, /tmp/outputs/Y_train/data, --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, lstm_data_processing]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: process-data-cnf}
          - {name: process-data-preprocessed_data}
      outputs:
        parameters:
          - name: lstm-data-processing-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: lstm-data-processing-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: lstm-data-processing-X_train_series
            valueFrom: {path: /tmp/outputs/X_train_series/data}
          - name: lstm-data-processing-X_valid_series
            valueFrom: {path: /tmp/outputs/X_valid_series/data}
          - name: lstm-data-processing-Y_train
            valueFrom: {path: /tmp/outputs/Y_train/data}
          - name: lstm-data-processing-Y_valid
            valueFrom: {path: /tmp/outputs/Y_valid/data}
          - name: lstm-data-processing-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: lstm_data_processing, path: /tmp/lstm_data_processing.html}
          - {name: lstm-data-processing-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: lstm-data-processing-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: lstm-data-processing-X_train_series, path: /tmp/outputs/X_train_series/data}
          - {name: lstm-data-processing-X_valid_series, path: /tmp/outputs/X_valid_series/data}
          - {name: lstm-data-processing-Y_train, path: /tmp/outputs/Y_train/data}
          - {name: lstm-data-processing-Y_valid, path: /tmp/outputs/Y_valid/data}
          - {name: lstm-data-processing-cnf, path: /tmp/outputs/cnf/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "process-data"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "preprocessed_data", {"inputValue": "preprocessed_data"},
          "--in", "SCALER_FILE", {"inputValue": "SCALER_FILE"}, "--in", "OBJECTS_DIR",
          {"inputValue": "OBJECTS_DIR"}, "--in", "cnf", {"inputValue": "cnf"}, "--out",
          "X_valid_series", {"outputPath": "X_valid_series"}, "--out", "X_train_series",
          {"outputPath": "X_train_series"}, "--out", "Y_valid", {"outputPath": "Y_valid"},
          "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"}, "--out", "cnf", {"outputPath":
          "cnf"}, "--out", "Y_train", {"outputPath": "Y_train"}, "--out", "SCALER_FILE",
          {"outputPath": "SCALER_FILE"}], "command": ["python3", "-u", "-m", "kale",
          "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb", "--step",
          "lstm_data_processing"], "env": {"PYTHONUNBUFFERED": "1"}, "image": "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "preprocessed_data", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}], "name": "lstm_data_processing", "outputs": [{"name": "X_valid_series",
          "type": "str"}, {"name": "X_train_series", "type": "str"}, {"name": "Y_valid",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}, {"name": "Y_train", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name": "run1"}',
                      pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR": "{{inputs.parameters.define-constants-OBJECTS_DIR}}",
          "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}", "cnf":
          "{{inputs.parameters.process-data-cnf}}", "preprocessed_data": "{{inputs.parameters.process-data-preprocessed_data}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: process-data
      container:
        args: [--in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}',
               --in, OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in,
               train, '{{inputs.parameters.read-data-train}}', --in, cnf, '{{inputs.parameters.define-constants-cnf}}',
               --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data,
               --out, preprocessed_data, /tmp/outputs/preprocessed_data/data, --out, cnf,
               /tmp/outputs/cnf/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, process_data]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: define-constants-cnf}
          - {name: read-data-train}
      outputs:
        parameters:
          - name: process-data-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: process-data-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: process-data-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
          - name: process-data-preprocessed_data
            valueFrom: {path: /tmp/outputs/preprocessed_data/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: process_data, path: /tmp/process_data.html}
          - {name: process-data-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: process-data-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: process-data-cnf, path: /tmp/outputs/cnf/data}
          - {name: process-data-preprocessed_data, path: /tmp/outputs/preprocessed_data/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "read-data"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "SCALER_FILE", {"inputValue": "SCALER_FILE"},
          "--in", "OBJECTS_DIR", {"inputValue": "OBJECTS_DIR"}, "--in", "train", {"inputValue":
          "train"}, "--in", "cnf", {"inputValue": "cnf"}, "--out", "SCALER_FILE",
          {"outputPath": "SCALER_FILE"}, "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"},
          "--out", "preprocessed_data", {"outputPath": "preprocessed_data"}, "--out",
          "cnf", {"outputPath": "cnf"}], "command": ["python3", "-u", "-m", "kale",
          "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb", "--step",
          "process_data"], "env": {"PYTHONUNBUFFERED": "1"}, "image": "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "SCALER_FILE", "type": "str"}, {"name": "OBJECTS_DIR",
          "type": "str"}, {"name": "train", "type": "str"}, {"name": "cnf", "type":
          "str"}], "name": "process_data", "outputs": [{"name": "SCALER_FILE", "type":
          "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "preprocessed_data",
          "type": "str"}, {"name": "cnf", "type": "str"}]}', pipelines.kubeflow.org/component_ref: '{"name":
          "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "cnf": "{{inputs.parameters.define-constants-cnf}}", "train": "{{inputs.parameters.read-data-train}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: read-data
      container:
        args: [--in, TEST_PATH, '{{inputs.parameters.define-constants-TEST_PATH}}',
               --in, OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in,
               cnf, '{{inputs.parameters.define-constants-cnf}}', --in, TRAIN_PATH, '{{inputs.parameters.define-constants-TRAIN_PATH}}',
               --in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}', --out,
               OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data, --out, train, /tmp/outputs/train/data,
               --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, cnf, /tmp/outputs/cnf/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, read_data]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: define-constants-TEST_PATH}
          - {name: define-constants-TRAIN_PATH}
          - {name: define-constants-cnf}
      outputs:
        parameters:
          - name: read-data-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: read-data-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: read-data-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
          - name: read-data-train
            valueFrom: {path: /tmp/outputs/train/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: read_data, path: /tmp/read_data.html}
          - {name: read-data-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: read-data-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: read-data-cnf, path: /tmp/outputs/cnf/data}
          - {name: read-data-train, path: /tmp/outputs/train/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "define-constants"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "TEST_PATH", {"inputValue": "TEST_PATH"},
          "--in", "OBJECTS_DIR", {"inputValue": "OBJECTS_DIR"}, "--in", "cnf", {"inputValue":
          "cnf"}, "--in", "TRAIN_PATH", {"inputValue": "TRAIN_PATH"}, "--in", "SCALER_FILE",
          {"inputValue": "SCALER_FILE"}, "--out", "OBJECTS_DIR", {"outputPath": "OBJECTS_DIR"},
          "--out", "train", {"outputPath": "train"}, "--out", "SCALER_FILE", {"outputPath":
          "SCALER_FILE"}, "--out", "cnf", {"outputPath": "cnf"}], "command": ["python3",
          "-u", "-m", "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "read_data"], "env": {"PYTHONUNBUFFERED": "1"}, "image": "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "TEST_PATH", "type": "str"}, {"name": "OBJECTS_DIR",
          "type": "str"}, {"name": "cnf", "type": "str"}, {"name": "TRAIN_PATH", "type":
          "str"}, {"name": "SCALER_FILE", "type": "str"}], "name": "read_data", "outputs":
          [{"name": "OBJECTS_DIR", "type": "str"}, {"name": "train", "type": "str"},
          {"name": "SCALER_FILE", "type": "str"}, {"name": "cnf", "type": "str"}]}',
                      pipelines.kubeflow.org/component_ref: '{"name": "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "TEST_PATH": "{{inputs.parameters.define-constants-TEST_PATH}}", "TRAIN_PATH":
          "{{inputs.parameters.define-constants-TRAIN_PATH}}", "cnf": "{{inputs.parameters.define-constants-cnf}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
    - name: run1
      inputs:
        parameters:
          - {name: rok_ensemble_workspace_4x5l7_url}
      dag:
        tasks:
          - name: compare-models
            template: compare-models
            dependencies: [create-volume-1, define-constants, evaluate-lstm, evaluate-xgb,
                           get-trained-lstm-model]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: evaluate-lstm-lstm_mse, value: '{{tasks.evaluate-lstm.outputs.parameters.evaluate-lstm-lstm_mse}}'}
                - {name: evaluate-lstm-lstm_smape, value: '{{tasks.evaluate-lstm.outputs.parameters.evaluate-lstm-lstm_smape}}'}
                - {name: evaluate-xgb-xgb_mse, value: '{{tasks.evaluate-xgb.outputs.parameters.evaluate-xgb-xgb_mse}}'}
                - {name: evaluate-xgb-xgb_smape, value: '{{tasks.evaluate-xgb.outputs.parameters.evaluate-xgb-xgb_smape}}'}
                - {name: get-trained-lstm-model-cnf, value: '{{tasks.get-trained-lstm-model.outputs.parameters.get-trained-lstm-model-cnf}}'}
          - name: create-volume-1
            template: create-volume-1
            arguments:
              parameters:
                - {name: rok_ensemble_workspace_4x5l7_url, value: '{{inputs.parameters.rok_ensemble_workspace_4x5l7_url}}'}
          - name: define-constants
            template: define-constants
            dependencies: [create-volume-1]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
          - name: evaluate-lstm
            template: evaluate-lstm
            dependencies: [create-volume-1, define-constants, get-trained-lstm-model]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: get-trained-lstm-model-X_valid_series, value: '{{tasks.get-trained-lstm-model.outputs.parameters.get-trained-lstm-model-X_valid_series}}'}
                - {name: get-trained-lstm-model-Y_valid, value: '{{tasks.get-trained-lstm-model.outputs.parameters.get-trained-lstm-model-Y_valid}}'}
                - {name: get-trained-lstm-model-cnf, value: '{{tasks.get-trained-lstm-model.outputs.parameters.get-trained-lstm-model-cnf}}'}
                - {name: get-trained-lstm-model-model_lstm, value: '{{tasks.get-trained-lstm-model.outputs.parameters.get-trained-lstm-model-model_lstm}}'}
          - name: evaluate-xgb
            template: evaluate-xgb
            dependencies: [create-volume-1, define-constants, get-trained-xgb-model]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: get-trained-xgb-model-cnf, value: '{{tasks.get-trained-xgb-model.outputs.parameters.get-trained-xgb-model-cnf}}'}
                - {name: get-trained-xgb-model-xgb_model, value: '{{tasks.get-trained-xgb-model.outputs.parameters.get-trained-xgb-model-xgb_model}}'}
                - {name: get-trained-xgb-model-xgb_test_data, value: '{{tasks.get-trained-xgb-model.outputs.parameters.get-trained-xgb-model-xgb_test_data}}'}
                - {name: get-trained-xgb-model-xgb_test_y, value: '{{tasks.get-trained-xgb-model.outputs.parameters.get-trained-xgb-model-xgb_test_y}}'}
          - name: get-trained-lstm-model
            template: get-trained-lstm-model
            dependencies: [create-volume-1, define-constants, lstm-data-processing]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-MODEL_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-MODEL_DIR}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: lstm-data-processing-X_train_series, value: '{{tasks.lstm-data-processing.outputs.parameters.lstm-data-processing-X_train_series}}'}
                - {name: lstm-data-processing-X_valid_series, value: '{{tasks.lstm-data-processing.outputs.parameters.lstm-data-processing-X_valid_series}}'}
                - {name: lstm-data-processing-Y_train, value: '{{tasks.lstm-data-processing.outputs.parameters.lstm-data-processing-Y_train}}'}
                - {name: lstm-data-processing-Y_valid, value: '{{tasks.lstm-data-processing.outputs.parameters.lstm-data-processing-Y_valid}}'}
                - {name: lstm-data-processing-cnf, value: '{{tasks.lstm-data-processing.outputs.parameters.lstm-data-processing-cnf}}'}
          - name: get-trained-xgb-model
            template: get-trained-xgb-model
            dependencies: [create-volume-1, define-constants, xgb-data-processing]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-MODEL_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-MODEL_DIR}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: xgb-data-processing-cnf, value: '{{tasks.xgb-data-processing.outputs.parameters.xgb-data-processing-cnf}}'}
                - {name: xgb-data-processing-xgb_test_x, value: '{{tasks.xgb-data-processing.outputs.parameters.xgb-data-processing-xgb_test_x}}'}
                - {name: xgb-data-processing-xgb_test_y, value: '{{tasks.xgb-data-processing.outputs.parameters.xgb-data-processing-xgb_test_y}}'}
                - {name: xgb-data-processing-xgb_train_x, value: '{{tasks.xgb-data-processing.outputs.parameters.xgb-data-processing-xgb_train_x}}'}
                - {name: xgb-data-processing-xgb_train_y, value: '{{tasks.xgb-data-processing.outputs.parameters.xgb-data-processing-xgb_train_y}}'}
          - name: lstm-data-processing
            template: lstm-data-processing
            dependencies: [create-volume-1, define-constants, process-data]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: process-data-cnf, value: '{{tasks.process-data.outputs.parameters.process-data-cnf}}'}
                - {name: process-data-preprocessed_data, value: '{{tasks.process-data.outputs.parameters.process-data-preprocessed_data}}'}
          - name: process-data
            template: process-data
            dependencies: [create-volume-1, define-constants, read-data]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: define-constants-cnf, value: '{{tasks.define-constants.outputs.parameters.define-constants-cnf}}'}
                - {name: read-data-train, value: '{{tasks.read-data.outputs.parameters.read-data-train}}'}
          - name: read-data
            template: read-data
            dependencies: [create-volume-1, define-constants]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: define-constants-TEST_PATH, value: '{{tasks.define-constants.outputs.parameters.define-constants-TEST_PATH}}'}
                - {name: define-constants-TRAIN_PATH, value: '{{tasks.define-constants.outputs.parameters.define-constants-TRAIN_PATH}}'}
                - {name: define-constants-cnf, value: '{{tasks.define-constants.outputs.parameters.define-constants-cnf}}'}
          - name: xgb-data-processing
            template: xgb-data-processing
            dependencies: [create-volume-1, define-constants, process-data]
            arguments:
              parameters:
                - {name: create-volume-1-name, value: '{{tasks.create-volume-1.outputs.parameters.create-volume-1-name}}'}
                - {name: define-constants-OBJECTS_DIR, value: '{{tasks.define-constants.outputs.parameters.define-constants-OBJECTS_DIR}}'}
                - {name: define-constants-SCALER_FILE, value: '{{tasks.define-constants.outputs.parameters.define-constants-SCALER_FILE}}'}
                - {name: process-data-cnf, value: '{{tasks.process-data.outputs.parameters.process-data-cnf}}'}
                - {name: process-data-preprocessed_data, value: '{{tasks.process-data.outputs.parameters.process-data-preprocessed_data}}'}
    - name: xgb-data-processing
      container:
        args: [--in, preprocessed_data, '{{inputs.parameters.process-data-preprocessed_data}}',
               --in, SCALER_FILE, '{{inputs.parameters.define-constants-SCALER_FILE}}', --in,
               OBJECTS_DIR, '{{inputs.parameters.define-constants-OBJECTS_DIR}}', --in, cnf,
               '{{inputs.parameters.process-data-cnf}}', --out, xgb_train_y, /tmp/outputs/xgb_train_y/data,
               --out, OBJECTS_DIR, /tmp/outputs/OBJECTS_DIR/data, --out, xgb_train_x, /tmp/outputs/xgb_train_x/data,
               --out, xgb_test_x, /tmp/outputs/xgb_test_x/data, --out, cnf, /tmp/outputs/cnf/data,
               --out, SCALER_FILE, /tmp/outputs/SCALER_FILE/data, --out, xgb_test_y, /tmp/outputs/xgb_test_y/data]
        command: [python3, -u, -m, kale, /home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb,
                  --step, xgb_data_processing]
        env:
          - {name: PYTHONUNBUFFERED, value: '1'}
        image: gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198
        securityContext: {runAsUser: 0}
        volumeMounts:
          - {mountPath: /home/jovyan, name: create-volume-1}
        workingDir: /home/jovyan/EnsembleDemandForecasting/notebooks
      inputs:
        parameters:
          - {name: create-volume-1-name}
          - {name: define-constants-OBJECTS_DIR}
          - {name: define-constants-SCALER_FILE}
          - {name: process-data-cnf}
          - {name: process-data-preprocessed_data}
      outputs:
        parameters:
          - name: xgb-data-processing-OBJECTS_DIR
            valueFrom: {path: /tmp/outputs/OBJECTS_DIR/data}
          - name: xgb-data-processing-SCALER_FILE
            valueFrom: {path: /tmp/outputs/SCALER_FILE/data}
          - name: xgb-data-processing-cnf
            valueFrom: {path: /tmp/outputs/cnf/data}
          - name: xgb-data-processing-xgb_test_x
            valueFrom: {path: /tmp/outputs/xgb_test_x/data}
          - name: xgb-data-processing-xgb_test_y
            valueFrom: {path: /tmp/outputs/xgb_test_y/data}
          - name: xgb-data-processing-xgb_train_x
            valueFrom: {path: /tmp/outputs/xgb_train_x/data}
          - name: xgb-data-processing-xgb_train_y
            valueFrom: {path: /tmp/outputs/xgb_train_y/data}
        artifacts:
          - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
          - {name: xgb_data_processing, path: /tmp/xgb_data_processing.html}
          - {name: xgb-data-processing-OBJECTS_DIR, path: /tmp/outputs/OBJECTS_DIR/data}
          - {name: xgb-data-processing-SCALER_FILE, path: /tmp/outputs/SCALER_FILE/data}
          - {name: xgb-data-processing-cnf, path: /tmp/outputs/cnf/data}
          - {name: xgb-data-processing-xgb_test_x, path: /tmp/outputs/xgb_test_x/data}
          - {name: xgb-data-processing-xgb_test_y, path: /tmp/outputs/xgb_test_y/data}
          - {name: xgb-data-processing-xgb_train_x, path: /tmp/outputs/xgb_train_x/data}
          - {name: xgb-data-processing-xgb_train_y, path: /tmp/outputs/xgb_train_y/data}
      metadata:
        annotations: {kubeflow-kale.org/dependent-templates: '["create-volume-1", "process-data"]',
                      pipelines.kubeflow.org/max_cache_staleness: P0D, kubeflow-kale.org/volume-name-parameters: '["create-volume-1-name"]',
                      pipelines.kubeflow.org/component_spec: '{"description": "", "implementation":
          {"container": {"args": ["--in", "preprocessed_data", {"inputValue": "preprocessed_data"},
          "--in", "SCALER_FILE", {"inputValue": "SCALER_FILE"}, "--in", "OBJECTS_DIR",
          {"inputValue": "OBJECTS_DIR"}, "--in", "cnf", {"inputValue": "cnf"}, "--out",
          "xgb_train_y", {"outputPath": "xgb_train_y"}, "--out", "OBJECTS_DIR", {"outputPath":
          "OBJECTS_DIR"}, "--out", "xgb_train_x", {"outputPath": "xgb_train_x"}, "--out",
          "xgb_test_x", {"outputPath": "xgb_test_x"}, "--out", "cnf", {"outputPath":
          "cnf"}, "--out", "SCALER_FILE", {"outputPath": "SCALER_FILE"}, "--out",
          "xgb_test_y", {"outputPath": "xgb_test_y"}], "command": ["python3", "-u",
          "-m", "kale", "/home/jovyan/EnsembleDemandForecasting/notebooks/modularised.ipynb",
          "--step", "xgb_data_processing"], "env": {"PYTHONUNBUFFERED": "1"}, "image":
          "gcr.io/arrikto/jupyter-kale-py36@sha256:dd3f92ca66b46d247e4b9b6a9d84ffbb368646263c2e3909473c3b851f3fe198"}},
          "inputs": [{"name": "preprocessed_data", "type": "str"}, {"name": "SCALER_FILE",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "cnf",
          "type": "str"}], "name": "xgb_data_processing", "outputs": [{"name": "xgb_train_y",
          "type": "str"}, {"name": "OBJECTS_DIR", "type": "str"}, {"name": "xgb_train_x",
          "type": "str"}, {"name": "xgb_test_x", "type": "str"}, {"name": "cnf", "type":
          "str"}, {"name": "SCALER_FILE", "type": "str"}, {"name": "xgb_test_y", "type":
          "str"}]}', pipelines.kubeflow.org/component_ref: '{"name": "run1"}', pipelines.kubeflow.org/arguments.parameters: '{"OBJECTS_DIR":
          "{{inputs.parameters.define-constants-OBJECTS_DIR}}", "SCALER_FILE": "{{inputs.parameters.define-constants-SCALER_FILE}}",
          "cnf": "{{inputs.parameters.process-data-cnf}}", "preprocessed_data": "{{inputs.parameters.process-data-preprocessed_data}}"}'}
        labels:
          access-ml-pipeline: "true"
          access-rok: "true"
          pipelines.kubeflow.org/metadata_written: "true"
          pipelines.kubeflow.org/cache_enabled: "false"
          pipelines.kubeflow.org/enable_caching: "true"
      volumes:
        - name: create-volume-1
          persistentVolumeClaim: {claimName: '{{inputs.parameters.create-volume-1-name}}'}
  arguments:
    parameters:
      - {name: rok_ensemble_workspace_4x5l7_url, value: 'http://rok.rok.svc.cluster.local/swift/v1/kubeflow-user/notebooks/ensemble-0_ensemble-workspace-4x5l7?version=4418e7ef-489a-4835-8426-50934ced4e83'}
  serviceAccountName: pipeline-runner
